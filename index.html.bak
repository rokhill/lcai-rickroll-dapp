<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Official Rick Roll of LCAI</title>

  <!-- Open Graph metadata for Discord previews -->
  <meta property="og:title" content="You've Been Rick Rolled by LightChain.ai" />
  <meta property="og:description" content="This is the official Rick Roll dApp of LightChain.ai. Join the chain, get rolled." />
  <meta property="og:image" content="https://rokhill.github.io/lcai-rickroll-dapp/assets/preview.png" />
  <meta property="og:url" content="https://rokhill.github.io/lcai-rickroll-dapp/" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
</head>
<body>
  <header class="hero">
    <h1>Official Rick Roll of LCAI</h1>
    <p>You've been rolled. Welcome to the chain.</p>
  </header>

  <main>
    <div class="counter">
      <p>You've been rolled <span id="counter">...</span> times.</p>
    </div>
  </main>

  <footer>
    <p>Powered by LightChain.ai â€¢ RickRoll dApp by rokhill</p>
  </footer>

  <script>
    const provider = new ethers.providers.JsonRpcProvider("https://rpc.lightchain.ai");

    const abi = [
      {
        "inputs": [],
        "name": "getRollCount",
        "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
        "stateMutability": "view",
        "type": "function"
      }
    ];

    const contract = new ethers.Contract(
      "0x3116771fde5F2c4dD56bF3AD6a2374A0D0490194",
      abi,
      provider
    );

    async function updateCounter() {
      try {
        const count = await contract.getRollCount();
        document.getElementById("counter").textContent = count.toString();
      } catch (err) {
        console.error("Failed to fetch counter:", err);
        document.getElementById("counter").textContent = "N/A";
      }
    }

    updateCounter();
    setInterval(updateCounter, 5000);
  </script>
</body>
</html>
